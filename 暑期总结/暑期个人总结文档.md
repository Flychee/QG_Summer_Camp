# 暑期训练营个人总结
## 暑期所学所得
在暑期训练营里，我学习了MAS、DP、CAV等相关知识
### MAS
#### 基础概念
1. **邻居智能体**
设有智能体为x，邻居智能体即为在拓扑中与x有边连接的智能体。无向拓扑中邻居智能体之间可以交换信息，有向拓扑中始点可发送信息，终点可接收信息。
2. **一致性**
当智能体系统渐进收敛至一致。如无向拓扑中，智能体状态和值不变，可求出平均值作为一致值，可设计算法收敛至该一致值，该算法称为平均一致算法。
3. **稳定性**
即Lyapunov稳定。
* 第一法：对于线性系统，存在 $\dot{x}(t)$=$Ax(t)$ ,只要保证矩阵A拥有负实部，即可证明系统大范围一致稳定。
* 第二法：通过定义标量函数 $V(x)$ , $\dot{V}(x)$=$dV(x) \over dt$ 。当满足$x = 0$ 时，$V(x)=0$ ；$x \neq 0$ 时，$V(x) > 0$ ，$\dot{V}(x)\leq 0$ ，可说明系统是Lyapunov稳定的。
4. **收敛率**
收敛率描述在时间 $t(或k)$ 时智能体系统的收敛程度。设收敛率为 $\eta$ ，多智能体系统状态一致值为 $a$ 。多智能体系统中存在多智能体   $x_i$ 。离散时间下, $\eta=$ $|x(k+1)-a| \over |x(k)-a|$ 。连续时间下，$\eta=$ $|x(t)+\dot{x}(t)-a| \over |x(t)-a|$ 。v
5. **固定拓扑与切换拓扑**
固定拓扑下节点间的拓扑关系不随时间发生改变,而在切换拓扑下节点间的拓扑关系是时变的。
6. **矩阵论**
在图G中，邻接矩阵$A$用于描述各个顶点间的关系。度矩阵$D$用于描述顶点的度数(有向图分为出度与入度)。拉普拉斯矩阵$L=D-A$，拉普拉斯矩阵为半正定矩阵且对称，矩阵的秩$rank(L)=n-c$ , $c$为拓扑的强连通片个数。最小非零特征值为图的代数连通度。
#### motif
motif译，指人为设置的一种拓扑结构，一般使用$\gamma(i,j)$表示，$i$为点的数量，  
$j$为边的数量，motif矩阵中的元素表示了该点（行）与其他元素（列）存在模体结构的数量，如  
下两图展现了一个拓扑结构里的$\gamma(3,3)$模体矩阵   
![motif例图](https://dingzhen-bucket.oss-cn-guangzhou.aliyuncs.com/Typoraimgs/motif函数验证.png)  
其对应矩阵为  
![对应motif矩阵](https://dingzhen-bucket.oss-cn-guangzhou.aliyuncs.com/Typoraimgs/motif函数验证矩阵.png) 
#### MWMS_S
![](https://dingzhen-bucket.oss-cn-guangzhou.aliyuncs.com/Typoraimgs/mwms_s.gif)
#### MWMS_J
![](https://dingzhen-bucket.oss-cn-guangzhou.aliyuncs.com/Typoraimgs/mwms_j.gif)
#### RSRSP
这个算法主要是将半径为通信距离的圆分割成若干个扇区，**然后旋转扇区，在每个扇区的智能体数量最均匀时，向每个扇区里距离最近的智能体发送合作信号**（说人话就是――――不要原来的邻接矩阵了，每个点按规律重新连线，形成新的邻接矩阵），同时，智能体也要接受其他智能体按照这个规律发送的合作信号。如此不断迭代，使得能体在扰动较小的情况下收敛。同时为了增快速度，在所有智能体彼此之间都能通信的前提下（邻接矩阵为全1矩阵），可以重新使用回传统的一致性算法。算法的核心在于旋转扇区，判断每个扇区内的智能体数量，并随之构建新的邻接矩阵。
##### 成果图
![](https://dingzhen-bucket.oss-cn-guangzhou.aliyuncs.com/Typoraimgs/mas.gif)
#### DSG
##### SDB
与RSRSP类似，分扇区不同的则是，取邻居时需求出最远邻居集后，若只有两个扇区有最远邻居集且两扇区相邻，需要从中各取一最远邻居控制输入，并使得以智能体为起点，经过两邻居的射线所夹角度最大。其他情况都是从每个扇区（有最远邻居集）随机取一个最远邻居控制输入，SDB算法完成。
##### DSG
将通信半径（r）设为原来的通信半径（R）一半，计算拓扑的连通分支。在以多智能体为圆心，R为半径的圆内寻找不包括多智能体自身的所有连通分支，在这些连通分支中各取离智能体最近的邻居。以邻居与智能体连线的中点为圆心，r为半径构建圆，多智能体下一时刻的位置必须落在这些圆的交集上，且离多智能体尽可能远（需求出最优参数$\lambda^*$），DSG算法完成。
##### 成果图
![](https://dingzhen-bucket.oss-cn-guangzhou.aliyuncs.com/Typoraimgs/DSG.gif)
### DP
#### 基本定义
1. 对于有限域$Z$，$z\in Z$代表$z$为$Z$中元素，从$Z$中抽取$z$组成数据集$D$,其样本量为$n$,属性的个数为维度$d$.    
2. 对于$D$的映射函数被定义为查询,$F=\{f_1,f_2...\}$表示一组查询.
3. 算法$M$,对查询$F$结果进行处理,使其满足隐私保护条件,此过程称为   隐私保护机制
4. 对于具有相同属性的数据集$D$与$D'$,对称差记作$D\Delta D'$,   
$|D\Delta D'|$表示$D\Delta D'$记录的数量,若$|D\Delta D'|=1$,   
称$D$和$D'$为相邻数据集.    
#### $\epsilon$-差分隐私
对于随机算法$M$,$P_M$为其所有可能的输出构成的集合,对于任意临近数据集以及$P_M$任意子集$S_M$,算法$M$提供$\epsilon$-差分隐私保护当且仅当  $$Pr[M(D)\in S_M]\leq Pr[M(D')\in S_M]*\exp(\epsilon)$$

>隐私预算$\epsilon$越小,保护水平越高,$D$与$D'$ 输出概率分布趋近完全相同;同理$\epsilon$越大,保护水平越低.
#### 敏感度 
敏感度是决定加入噪声量大小的关键参数，它指删除数据集中任一记录对查询结果造成的最大改变  
##### 全局敏感度  
依照基本定义可知,对函数$f:D\rightarrow R^d$,输入一个数据集,会输出一个d维向量,对任意邻近数据集,全局敏感度$GS_f$定义为
$$GS_f = \max _{D,D'}||f(D)-f(D')||_1$$    
$||f(D)-f(D')||_1$为$f(D)$与$f(D')$的1-阶范数距离    
> 函数的全局敏感度由函数本身决定     
   
##### 局部敏感度   
类似上式  
$$LS_f = \max _{D'}||f(D)-f(D')||_1$$  
全局敏感度与局部敏感度的关系  
$$GS_f = \max _{D}(LS_f(D)$$   
##### 平滑上界   
若函数$S:D\rightarrow R$满足  
$$LS_f(D)\leq S(D) \leq e^{\beta}S(D')$$  
S是函数f的局部敏感度的$\beta$-平滑上界
##### 平滑敏感度  
函数$S_{f\beta}(D)=\max_{D'}(LS_f(D')*e^{-\beta|D\Delta D'}$  
称为函数$f$的$\beta$-平滑敏感度,$\beta>0$  
#### 差分隐私保护算法的组合性质  
##### 序列组合性
设有算法$M_1,M_2,...,M_N$,隐私保护预算$\epsilon_1,\epsilon    _2,...,\epsilon_n$,对于相同数据集D,这些算法构成的组合算法    
$$M(M_1(D),M_2(D),...,M_n(D))$$  
提供$(\sum_{i = 1}^{n}\epsilon_i)$-差分隐私保护  

##### 并行组合性
设有算法$M_1,M_2,...,M_N$,隐私保护预算$\epsilon_1,\epsilon    _2,...,\epsilon_n$,对于相同数据集D,这些算法构成的组合算法    
$$M(M_1(D_1),M_2(D_2),...,M_n(D_n))$$
提供$(\max \epsilon_i)$-差分隐私保护
#### 实现机制
##### Laplace机制
针对数值型查询结果,添加服从Laplace分布的噪声,Laplace分布位置  
参数为0,尺度参数为$b$,概率密度函数为   
$$p(x) =1/2b*\exp(-|x|/b)$$  
##### 指数机制
针对选择型查询结果,设查询函数输出域为$Range$,实体对象$r \in Range$  
,函数$q(D,r)\rightarrow R$成为输出值$r$的可用性函数,用于评估输出值的优劣程度.$\Delta q$为函数$q(D,r)$的敏感度.算法$M$以正比于$\exp(\epsilon q(D,r)/(2\Delta q))$的概率从$Range$ 中输出$r$
##### 瑞丽熵
瑞丽熵是信息学上的熵定义的一种比较普遍的形式  
$$H_{\alpha}(X) =  log(\sum^n_{i = 1}p^{\alpha}_i)/(1-\alpha)$$  
其中，$\alpha \geq 0$和$\alpha \neq 1$  
当$\alpha=0$,$H_{0}(X)$表示Hartley熵  
当$\alpha \rightarrow 1$,$H_{1}(X)$表示香农熵
当$\alpha \rightarrow \infty$,$H_{\infty}(X)$表示最小熵

##### 瑞丽散度  
与瑞丽熵相似  
$$D_{\alpha}(P||Q) =  log(\sum^n_{i = 1}q^{\alpha}_i*(p^{\alpha}_i/q^{\alpha}_i))/(\alpha-1)$$  
当$\alpha \rightarrow 1$,得到KL-散度   
当$\alpha \rightarrow \infty$,得到最大散度  
### CAV
**控制方程**  
$\dot{x_i}(t) = v_i(t)$
$\dot{v_i}(t) = u_i(t)$
同时引入领导者，领导者状态方程  
$\dot{x_L}(t) = v_L(t)$
$\dot{v_L}(t) = u_L(t)$  
对于追随者与领导者间的关系用邻接矩阵$K$表示，论文里领导者不接收信息，将  
$K$简化成向量。  

**收敛算法**
$\dot{x_i}(t) = v_i(t)$  

$\dot{v_i}(t) = \dot{v_L}(t)-\sum_{j=1}^n a_{ij}[x_i(t)-x_j(t)-r_{ij}(t)
+\beta(v_i(t)-v_j(t))]$
$-k_i[x_i(t)-x_L(t)-r_L+\gamma(v_i(t)-v_L(t))]
$
**误差方程**
$\dot{{\tilde{x_i}}} = dot{{\tilde{v_i}}}$
$\dot{\tilde{v_i}}(t) = -\sum_{j=1}^n a_{ij}[\tilde{x_i(t)}-\tilde{x_j(t)}+\beta(\tilde{v_i}(t)-\tilde{v_j}(t))]$
$-k_i[\tilde{x_i(t)}+\gamma\tilde{v_i(t)}]$

**实验结果**
![](https://dingzhen-bucket.oss-cn-guangzhou.aliyuncs.com/Typoraimgs/fly.gif)  
## 任务完成度
### 日常的论文学习
#### MAS 
学习了基础概念（第一阶段），粗读了HSB，复现了motif、RSRSP、DSG三篇论文的算法（第三阶段）。
#### DP
学习了基础概念（第一阶段），但是AWDP这篇论文没有去看（第三阶段）。
#### CAV
复现了第一阶段的论文的算法，粗读了金刚师兄和彦斌师兄的论文（第三阶段）。
#### 中期考核（第二阶段）
我负责的内容为实现具有差分隐私的效果很差，算法运算时间很长,如果去掉一个选择的步骤就可以简化为矩阵运算。
#### 最终考核
主要的算法内容与MAS挂钩，所以我基于MAS的完成度部署了4个算法在算法可视化平台上（MWMS_S和MWMS_J为motif论文里的两个算法）。
## 优缺点
### 优点
接受知识较快，能对论文内容有一个大致的理解。
### 缺点
对细节方面把控不够，复现算法时容易出错，需要反复回看论文。